{"version":3,"sources":["../../src/pages/ble-button-details/ble-button-details.module.ts","../../src/pages/ble-button-details/ble-button-details.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BleButtonDetailsPage } from './ble-button-details';\n\n@NgModule({\n  declarations: [\n    BleButtonDetailsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BleButtonDetailsPage),\n  ],\n  exports: [\n    BleButtonDetailsPage\n  ]\n})\nexport class BleButtonDetailsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ble-button-details/ble-button-details.module.ts","import { Component, NgZone } from '@angular/core';\nimport { IonicPage } from 'ionic-angular';\nimport { NavController, NavParams, AlertController } from 'ionic-angular';\nimport { BLE } from '@ionic-native/ble';\n\n// Bluetooth UUIDs\nconst BUTTON_SERVICE = 'ffe0';\nconst BUTTON_STATE_CHARACTERISTIC = 'ffe1';\n\n@IonicPage({\n  name: 'BleButtonDetailsPage'\n})\n@Component({\n  selector: 'page-ble-button-details',\n  templateUrl: 'ble-button-details.html',\n})\nexport class BleButtonDetailsPage {\n\n  peripheral: any = {};\n  buttonState: number;\n  statusMessage: string;\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private ble: BLE,\n    private alertCtrl: AlertController,\n    private ngZone: NgZone) {\n\n    let device = navParams.get('device');\n\n    this.setStatus('Connecting to ' + device.name || device.id);\n\n    this.ble.connect(device.id).subscribe(\n      peripheral => this.onConnected(peripheral),\n      peripheral => this.showAlert('Disconnected', 'The peripheral unexpectedly disconnected')\n    );\n\n  }\n\n  // the connection to the peripheral was successful\n  onConnected(peripheral) {\n\n    this.peripheral = peripheral;\n    this.setStatus('Connected to ' + (peripheral.name || peripheral.id));\n\n    this.ble.startNotification(this.peripheral.id, BUTTON_SERVICE, BUTTON_STATE_CHARACTERISTIC).subscribe(\n      data => this.onButtonStateChange(data),\n      () => this.showAlert('Unexpected Error', 'Failed to subscribe for button state changes')\n    )\n\n  }\n\n  onButtonStateChange(buffer: ArrayBuffer) {\n    var data = new Uint8Array(buffer);\n    console.log(data[0]);\n\n    this.ngZone.run(() => {\n      this.buttonState = data[0];\n    });\n\n  }\n\n  // Disconnect peripheral when leaving the page\n  ionViewWillLeave() {\n    console.log('ionViewWillLeave disconnecting Bluetooth');\n    this.ble.disconnect(this.peripheral.id).then(\n      () => console.log('Disconnected ' + JSON.stringify(this.peripheral)),\n      () => console.log('ERROR disconnecting ' + JSON.stringify(this.peripheral))\n    )\n  }\n\n  showAlert(title, message) {\n    let alert = this.alertCtrl.create({\n      title: title,\n      subTitle: message,\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n\n  setStatus(message) {\n    console.log(message);\n    this.ngZone.run(() => {\n      this.statusMessage = message;\n    });\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ble-button-details/ble-button-details.ts"],"sourceRoot":""}